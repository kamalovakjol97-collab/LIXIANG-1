# Инструкция по настройке сайта XGL

## Шаг 1: Установка зависимостей

```bash
npm install
```

## Шаг 2: Настройка Supabase

### 2.1 Создание проекта в Supabase

1. Зайдите на [supabase.com](https://supabase.com)
2. Создайте новый проект
3. Запомните URL проекта и Anon Key (находятся в Settings > API)

### 2.2 Создание таблицы

1. В Supabase перейдите в SQL Editor
2. Выполните SQL-скрипт из файла `supabase-setup.sql`
3. Или создайте таблицу вручную через Table Editor со следующими полями:
   - `id` (uuid, primary key, default: gen_random_uuid())
   - `cargo_type` (text)
   - `from_location` (text)
   - `to_location` (text)
   - `weight_volume` (text)
   - `email` (text, nullable)
   - `phone` (text)
   - `inn` (text)
   - `company_name` (text)
   - `full_name` (text)
   - `created_at` (timestamp, default: now())

### 2.3 Настройка переменных окружения

1. Создайте файл `.env` в корне проекта
2. Добавьте следующие строки:
```
VITE_SUPABASE_URL=https://ваш-проект.supabase.co
VITE_SUPABASE_ANON_KEY=ваш_anon_key
```

## Шаг 3: Запуск локально

```bash
npm run dev
```

Сайт будет доступен по адресу `http://localhost:5173`

## Шаг 4: Сборка для продакшена

```bash
npm run build
```

Собранные файлы будут в папке `dist`

## Шаг 5: Деплой на Netlify

### 5.1 Через Netlify CLI

1. Установите Netlify CLI: `npm install -g netlify-cli`
2. Войдите: `netlify login`
3. Инициализируйте проект: `netlify init`
4. Деплой: `netlify deploy --prod`

### 5.2 Через веб-интерфейс Netlify

1. Зайдите на [netlify.com](https://netlify.com)
2. Подключите ваш Git-репозиторий
3. Настройки сборки:
   - **Build command:** `npm run build`
   - **Publish directory:** `dist`
4. **Важно:** Если Netlify автоматически определил проект как Next.js:
   - Перейдите в **Site settings** → **Build & deploy** → **Plugins**
   - Отключите плагин `@netlify/plugin-nextjs` (если он включен)
   - Или добавьте переменную окружения: `NETLIFY_NEXT_PLUGIN_SKIP = true`
5. Добавьте переменные окружения в настройках сайта:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`
   - `NETLIFY_NEXT_PLUGIN_SKIP` = `true` (если плагин всё ещё активен)
6. Нажмите "Deploy site"

## Структура проекта

```
├── src/
│   ├── components/          # React компоненты
│   │   ├── Header.jsx
│   │   ├── Hero.jsx
│   │   ├── Services.jsx
│   │   ├── HowWeWork.jsx
│   │   ├── WhyXGLOG.jsx
│   │   ├── Geography.jsx
│   │   ├── ApplicationForm.jsx
│   │   ├── Footer.jsx
│   │   └── PrivacyPolicy.jsx
│   ├── config/
│   │   └── supabase.js     # Конфигурация Supabase
│   ├── App.jsx              # Главный компонент
│   ├── main.jsx             # Точка входа
│   └── index.css            # Глобальные стили
├── index.html
├── package.json
├── vite.config.js
├── netlify.toml             # Конфигурация Netlify
└── supabase-setup.sql       # SQL для создания таблицы
```

## Проверка работы формы

После настройки Supabase:

1. Запустите сайт локально
2. Заполните форму заявки
3. Проверьте в Supabase (Table Editor), что данные сохранились в таблице `applications`

## Важные замечания

- Не коммитьте файл `.env` в Git (он уже в `.gitignore`)
- Убедитесь, что Row Level Security настроен правильно в Supabase
- Для продакшена используйте переменные окружения в Netlify, а не `.env` файл
